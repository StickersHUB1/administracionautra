<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Mi Perfil | AUTRA Digital</title>

<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

<style>
:root{
  --primary:#ABC8E9;
  --secondary:#F9EEE0;
  --headline:#545454;
  --subhead:#737373;
  --muted:#D9D9D9;
  --container:1100px;
}

/* ===== HEADER AZUL (igual al bueno) ===== */
body{margin:0;font-family:Montserrat,sans-serif;color:var(--subhead);background:#fff;}
header.site{
  position:sticky;top:0;z-index:1000;
  background:var(--primary);border-bottom:1px solid var(--muted);
}
.site__bar{
  max-width:var(--container);margin:0 auto;padding:12px 16px;
  display:flex;align-items:center;gap:12px;
}
.brand{display:flex;align-items:center;gap:10px;font-weight:700;color:var(--headline);text-decoration:none;font-size:20px;}
.brand img{width:34px;height:34px;border-radius:8px;object-fit:contain;}

/* ===== NAV BLANCO PEGADO AL HEADER ===== */
nav.tabs{background:#fff;border-bottom:1px solid var(--muted);}
.tabs__row{
  max-width:var(--container);margin:0 auto;padding:10px 16px;
  display:flex;align-items:center;gap:18px;
}
.tabs__links{display:flex;gap:18px;flex-wrap:wrap;}
.tabs__links a{
  text-decoration:none;color:var(--headline);font-weight:600;font-size:14px;
  padding:8px 12px;border-radius:10px;transition:background .18s ease;
}
.tabs__links a:hover{background:var(--secondary);}
.tabs__links a.active{background:rgba(171,200,233,.45);}
.tabs__actions{margin-left:auto;display:flex;gap:10px;}
.btn{
  background:var(--primary);color:#fff;border:2px solid var(--primary);
  padding:8px 14px;border-radius:999px;font-weight:600;font-size:13px;text-decoration:none;
  transition:background .18s ease,border-color .18s ease,color .18s ease;
}
.btn:hover{background:var(--secondary);border-color:var(--secondary);color:var(--headline);}

/* ===== ZONA DE CONTENIDO (beige) ===== */
.main-wrap{
  background:var(--secondary);min-height:calc(100vh - 110px);
  padding:48px 16px;display:flex;justify-content:center;
}

/* ===== TARJETA PERFIL (como tu diseño original) ===== */
.profile-card{
  background:#fff;border-radius:18px;box-shadow:0 6px 20px rgba(0,0,0,.08);
  padding:50px 40px;max-width:380px;width:100%;text-align:center;border-top:6px solid var(--primary);
}
.profile-pic{
  width:110px;height:110px;border-radius:50%;background:var(--primary);
  display:flex;align-items:center;justify-content:center;color:#fff;font-weight:700;font-size:1.8rem;
  margin:0 auto 22px;box-shadow:0 0 14px rgba(171,200,233,.6);overflow:hidden;position:relative;cursor:pointer;
}
.profile-pic img{width:100%;height:100%;object-fit:cover;}
.profile-name{color:var(--headline);font-size:1.4rem;font-weight:700;margin-bottom:14px;outline:none;}
.role-badge{
  display:inline-block;background:var(--primary);color:#fff;padding:8px 20px;border-radius:30px;
  font-size:1rem;font-weight:600;letter-spacing:.3px;margin-bottom:20px;cursor:pointer;position:relative;
}
.dropdown{
  position:absolute;top:calc(100% + 12px);left:50%;transform:translateX(-50%);background:#fff;border-radius:16px;
  box-shadow:0 8px 26px rgba(0,0,0,.12);opacity:0;visibility:hidden;transition:opacity .2s ease,transform .2s ease;
  z-index:100;padding:22px 26px;
}
.dropdown.active{opacity:1;visibility:visible;transform:translateX(-50%) scale(1);}
.dropdown table{border-collapse:separate;border-spacing:20px 10px;width:100%;}
.dropdown td{padding:8px 16px;color:var(--subhead);cursor:pointer;border-radius:10px;text-align:center;}
.dropdown td:hover{background:var(--primary);color:#fff;}
.studentcode-wrap{margin:12px 0;font-size:.85rem;}
.role-desc{margin-top:20px;font-size:1rem;color:var(--subhead);line-height:1.6;outline:none;}
footer{max-width:var(--container);margin:18px auto 32px;color:var(--subhead);font-size:.85rem;text-align:center;}
</style>
</head>
<body>

<!-- HEADER bueno -->
<header class="site">
  <div class="site__bar">
    <a class="brand" href="foro_autra.html">
      <img src="assets/images/logo.png" alt="AUTRA">
      <span>AUTRA</span>
    </a>
  </div>
</header>

<!-- NAV blanco, igual al de la página buena -->
<nav class="tabs" role="navigation">
  <div class="tabs__row">
    <div class="tabs__links">
      <a href="foro_autra.html">Foro AUTRA</a>
      <a href="ClassRoom.html">ClassRoom</a>
      <a href="Perfil.html" class="active">Mi Perfil</a>
      <a href="Tutoria_privada.html">Tutoría Priv.</a>
    </div>
    <div class="tabs__actions">
      <a href="iniciar_sesion.html" class="btn">Iniciar sesión</a>
      <a href="registro.html" class="btn">Registrarse</a>
    </div>
  </div>
</nav>

<!-- CONTENIDO beige con la tarjeta centrada -->
<div class="main-wrap">
  <div class="profile-card">
    <label class="profile-pic" for="uploadPic">
      <img id="profileImg" alt="">
    </label>
    <input type="file" id="uploadPic" accept="image/*" style="display:none">

    <div id="name" class="profile-name" contenteditable="true">María Robledo</div>

    <div id="roleContainer" style="position:relative;">
      <div id="role" class="role-badge">Formador principal ▾</div>
      <div id="dropdown" class="dropdown">
        <table><tbody>
          <tr><td>Formador Principal</td></tr>
          <tr><td>Formador Adjunto</td></tr>
          <tr><td>Tutor</td></tr>
          <tr><td>Supervisor</td></tr>
          <tr><td>Invitado Especialista</td></tr>
        </tbody></table>
      </div>
    </div>

    <div class="studentcode-wrap">
      <code id="studentCode">F-123456</code>
    </div>

    <p id="desc" class="role-desc" contenteditable="true">
      Responsable del módulo “Psicología Clínica II”.
    </p>
  </div>
</div>

<footer>AUTRA Digital · Sistema de Formación 2025</footer>

<script>
/* Foto con fallback y persistencia */
(function(){
  const img = document.getElementById("profileImg");
  const input = document.getElementById("uploadPic");
  const avatar = document.querySelector(".profile-pic");
  const saved = JSON.parse(localStorage.getItem("profileData") || "{}");
  const name = saved.name || "U";

  if(saved.img){ img.src = saved.img; }
  else { img.remove(); avatar.textContent = name.charAt(0).toUpperCase(); }

  input.addEventListener("change", e=>{
    const f = e.target.files[0]; if(!f) return;
    const r = new FileReader();
    r.onload = ev=>{
      avatar.textContent = ""; avatar.appendChild(img);
      img.src = ev.target.result;
      saved.img = ev.target.result;
      localStorage.setItem("profileData", JSON.stringify(saved));
    };
    r.readAsDataURL(f);
  });
})();
</script>

<script>
/* Dropdown rol + autosave básico */
const role = document.getElementById("role");
const dropdown = document.getElementById("dropdown");
const nameEl = document.getElementById("name");
const descEl = document.getElementById("desc");

role.addEventListener("click", ()=> dropdown.classList.toggle("active"));
document.addEventListener("click", e=>{
  if(!dropdown.contains(e.target) && e.target!==role) dropdown.classList.remove("active");
});
dropdown.querySelectorAll("td").forEach(td=>{
  td.addEventListener("click", ()=>{
    role.textContent = td.textContent.trim() + " ▾";
    dropdown.classList.remove("active");
    const data = JSON.parse(localStorage.getItem("profileData")||"{}");
    data.role = td.textContent.trim();
    localStorage.setItem("profileData", JSON.stringify(data));
  });
});
[nameEl, descEl].forEach(el=>{
  el.addEventListener("input", ()=>{
    const data = JSON.parse(localStorage.getItem("profileData")||"{}");
    data.name = nameEl.textContent.trim();
    data.desc = descEl.textContent.trim();
    localStorage.setItem("profileData", JSON.stringify(data));
  });
});
</script>

</body>
</html>
